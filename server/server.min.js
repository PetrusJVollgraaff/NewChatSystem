const express=require("express"),http=require("http"),cors=require("cors"),cookieParser=require("cookie-parser"),{authRouter:authRouter}=require("./Routes/auth"),{searchRouter:searchRouter}=require("./Routes/search"),{profilerouter:profilerouter}=require("./Routes/profile"),setupSocket=require("./utils/socketsconfig"),{startchatRouter:startchatRouter}=require("./Routes/startchat"),{getmsgRouter:getmsgRouter}=require("./Routes/getmessages"),PORT=process.env.PORT||3001,allowedOrigin="http://localhost:3000",app=express(),server=http.createServer(app);setupSocket(server,allowedOrigin),app.use(cors({origin:allowedOrigin,credentials:!0,methods:["GET","POST"]})),app.use(cookieParser()),app.use(express.json()),app.use("/auth",authRouter),app.use("/search",searchRouter),app.use("/profile",profilerouter),app.use("/start",startchatRouter),app.use("/get",getmsgRouter),server.listen(PORT,(()=>{console.log(`Server running on port ${PORT}`)}));