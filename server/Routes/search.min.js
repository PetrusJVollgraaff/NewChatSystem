const express=require("express"),db=require("../database/model"),{authenticate:authenticate}=require("./auth"),searchRouter=express.Router();searchRouter.post("/user",authenticate,(async(req,res)=>{const{username:username}=req.body;try{const results=db.prepare("SELECT id, username FROM users WHERE LOWER(username) LIKE '%' || LOWER(?) || '%' AND NOT id = ? ").all(username,req.user.id);res.json({users:results})}catch(err){return console.error("Search user error:",err),res.status(400).json({message:`No user exists '${username}'`})}})),module.exports={searchRouter:searchRouter};