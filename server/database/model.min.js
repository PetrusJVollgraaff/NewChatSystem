const Database=require("better-sqlite3"),db=new Database("mydatabase.db");db.exec("\n    CREATE TABLE IF NOT EXISTS users(\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        username TEXT UNIQUE NOT NULL,\n        password TEXT NOT NULL,\n        activeYN  VARCHAR(3) DEFAULT 'yes',\n        deletedYN VARCHAR(3) DEFAULT 'no'\n    );\n    \n    CREATE TABLE IF NOT EXISTS userdetails(\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        profile_media_id INTEGER DEFAULT NULL,\n        bg_media_id INTEGER DEFAULT NULL,\n        email TEXT,\n        displayname TEXT, \n        deletedYN VARCHAR(3) DEFAULT 'no',\n        FOREIGN KEY(profile_media_id) REFERENCES mediaused (id),\n        FOREIGN KEY(bg_media_id) REFERENCES mediaused (id)\n    );\n\n    CREATE TABLE IF NOT EXISTS rooms(\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        name TEXT NOT NULL\n    );\n\n    CREATE TABLE IF NOT EXISTS one_one(\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        receiver_id INTEGER,\n        sender_id INTEGER,\n        timestamp DATETIME DEFAULT CURRENT_TIMESTAMP,\n        FOREIGN KEY(receiver_id) REFERENCES users(id),\n        FOREIGN KEY(sender_id) REFERENCES users(id)\n    );\n\n    CREATE TABLE IF NOT EXISTS room_one(\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        receiver_id INTEGER,\n        room_id INTEGER,\n        timestamp DATETIME DEFAULT CURRENT_TIMESTAMP,\n        activeYN  VARCHAR(3) DEFAULT 'yes',\n        FOREIGN KEY(receiver_id) REFERENCES users(id),\n        FOREIGN KEY(room_id) REFERENCES rooms(id)\n    );\n\n    CREATE TABLE IF NOT EXISTS messages (\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        user_id INTEGER,\n        room_id INTEGER DEFAULT NULL,\n        chat_id INTEGER DEFAULT NULL,\n        content TEXT,\n        timestamp DATETIME DEFAULT CURRENT_TIMESTAMP,\n        deletedYN VARCHAR(3) DEFAULT 'no',\n        FOREIGN KEY(user_id) REFERENCES users(id),\n        FOREIGN KEY(room_id) REFERENCES rooms(id),\n        FOREIGN KEY(chat_id) REFERENCES one_one(id)\n    );\n\n    CREATE TABLE IF NOT EXISTS modules(\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        modulename TEXT UNIQUE NOT NULL,\n        timestamp DATETIME DEFAULT CURRENT_TIMESTAMP\n    );\n\n    CREATE TABLE IF NOT EXISTS mediaused(\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        modules_id INTEGER,\n        media_id INTEGER DEFAULT NULL,\n        doc_id INTEGER DEFAULT NULL,\n        assigned_id INTEGER,\n        timestamp DATETIME DEFAULT CURRENT_TIMESTAMP,\n        deletedYN VARCHAR(3) DEFAULT 'no',\n        FOREIGN KEY(modules_id) REFERENCES messages(id),\n        FOREIGN KEY(media_id) REFERENCES medias (id),\n        FOREIGN KEY(doc_id) REFERENCES documents (id)\n    );\n\n    CREATE TABLE IF NOT EXISTS medias (\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        user_id INTEGER,\n        name TEXT, \n        type TEXT,\n        path TEXT,\n        thumbnail TEXT DEFAULT NULL,\n        timestamp DATETIME DEFAULT CURRENT_TIMESTAMP,\n        deletedYN VARCHAR(3) DEFAULT 'no',\n        FOREIGN KEY(user_id) REFERENCES users(id)\n    );\n\n    CREATE TABLE IF NOT EXISTS documents (\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        user_id INTEGER,\n        name TEXT, \n        type TEXT,\n        path TEXT,\n        timestamp DATETIME DEFAULT CURRENT_TIMESTAMP,\n        deletedYN VARCHAR(3) DEFAULT 'no',\n        FOREIGN KEY(user_id) REFERENCES users(id)\n    );\n"),db.prepare("INSERT OR IGNORE INTO modules (modulename) VALUES ('Profile'), ('Messages')").run(),module.exports=db;